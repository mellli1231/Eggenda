Index: app/src/main/java/com/example/eggenda/ui/settings/ProfileActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.eggenda.ui.settings\r\n\r\nimport android.app.Activity\r\nimport android.app.AlertDialog\r\nimport android.app.Dialog\r\nimport android.content.DialogInterface\r\nimport android.content.Intent\r\nimport android.content.SharedPreferences\r\nimport android.graphics.Bitmap\r\nimport android.graphics.BitmapFactory\r\nimport android.graphics.Matrix\r\nimport androidx.exifinterface.media.ExifInterface\r\nimport android.net.Uri\r\nimport android.os.Bundle\r\nimport android.provider.MediaStore\r\nimport android.view.View\r\nimport android.widget.Button\r\nimport android.widget.EditText\r\nimport android.widget.ImageView\r\nimport android.widget.Toast\r\nimport androidx.activity.result.ActivityResult\r\nimport androidx.activity.result.ActivityResultLauncher\r\nimport androidx.activity.result.contract.ActivityResultContracts\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport androidx.core.content.FileProvider\r\nimport androidx.fragment.app.DialogFragment\r\nimport androidx.lifecycle.ViewModelProvider\r\nimport com.example.eggenda.MyViewModel\r\nimport com.example.eggenda.R\r\nimport com.example.eggenda.Util\r\nimport java.io.File\r\n\r\nclass ProfileActivity: AppCompatActivity() {\r\n    companion object {\r\n        const val FEMALE = 0\r\n        const val MALE = 1\r\n        const val DIALOG_KEY = \"dialog\"\r\n        const val PHOTO_DIALOG = 4\r\n    }\r\n\r\n    private lateinit var userName: EditText\r\n    private lateinit var firstName: EditText\r\n    private lateinit var lastName: EditText\r\n    private lateinit var emailPhone: EditText\r\n    private lateinit var dateBirth: EditText\r\n    private lateinit var country: EditText\r\n    private lateinit var saveProfile: Button\r\n    private lateinit var cancelProfile: Button\r\n\r\n    private lateinit var imageView: ImageView\r\n    private lateinit var button: Button\r\n    private lateinit var tempImgUri: Uri\r\n    private lateinit var imgUri: Uri\r\n    private lateinit var myViewModel: MyViewModel\r\n    private lateinit var cameraResult: ActivityResultLauncher<Intent>\r\n    private val tempImgFileName = \"temp.jpg\"\r\n    private val imgFileName = \"profile.jpg\"\r\n    private var profileImagePath: String? = null\r\n    private lateinit var tempImgFile: File\r\n    private lateinit var profileImgFile: File\r\n    private var isPhotoChange: Boolean = false\r\n    private lateinit var sharedPreferences: SharedPreferences\r\n    private lateinit var galleryResult: ActivityResultLauncher<Intent>\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.profile)\r\n\r\n        //initialize variables\r\n        userName = findViewById(R.id.edit_username)\r\n        firstName = findViewById(R.id.edit_first_name)\r\n        lastName = findViewById(R.id.edit_last_name)\r\n        emailPhone = findViewById(R.id.edit_email_phone)\r\n        dateBirth = findViewById(R.id.edit_birth)\r\n        country = findViewById(R.id.edit_country)\r\n        imageView = findViewById(R.id.profile_photo)\r\n        button = findViewById(R.id.btnChangePhoto)\r\n        saveProfile = findViewById(R.id.save_profile)\r\n        cancelProfile = findViewById(R.id.cancel_profile)\r\n        sharedPreferences = getSharedPreferences(\"profile\", MODE_PRIVATE)\r\n\r\n        //retrieve saved data on startup\r\n        loadProfile()\r\n        println(\"profile successfully loaded onto screen\")\r\n\r\n        //Profile Photo setup\r\n        Util.checkPermissions(this)\r\n\r\n        tempImgFile = File(getExternalFilesDir(null), tempImgFileName)\r\n        tempImgUri = FileProvider.getUriForFile(this, \"com.example.eggenda\", tempImgFile)\r\n\r\n        profileImgFile = File(getExternalFilesDir(null), imgFileName)\r\n        imgUri = FileProvider.getUriForFile(this, \"com.example.eggenda\", profileImgFile)\r\n\r\n        //implement button prompting camera\r\n        button.setOnClickListener() {\r\n            println(\"change profile photo button clicked\")\r\n            showMyDialogFragment(PHOTO_DIALOG, \"Pick Profile Picture\")\r\n        }\r\n\r\n        //initialize gallery activity result\r\n        galleryResult = registerForActivityResult(ActivityResultContracts.StartActivityForResult()) { result: ActivityResult ->\r\n            if(result.resultCode == Activity.RESULT_OK) {\r\n                //get uri of image\r\n                result.data?.data?.let { uri ->\r\n                    //read image through input stream\r\n                    val inputStream = contentResolver.openInputStream(uri)\r\n                    //write image to tempImgFile\r\n                    tempImgFile.outputStream().use { outputStream->\r\n                        inputStream?.copyTo(outputStream)\r\n                    }\r\n                    //create bitmap\r\n                    val bitmap = Util.getBitmap(this, tempImgUri)\r\n                    setProfilePhoto(bitmap)\r\n                    println(\"Image successfully loaded onto screen\")\r\n                }\r\n            }\r\n        }\r\n\r\n        //initialize gallery activity result\r\n        cameraResult = registerForActivityResult(ActivityResultContracts.StartActivityForResult()) { result: ActivityResult ->\r\n            if (result.resultCode == Activity.RESULT_OK) {\r\n                println(\"first camera result call\")\r\n                //read image details and create bitmap\r\n                val exifInterface = ExifInterface(tempImgFile.absolutePath)\r\n                val orientation = exifInterface.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1)\r\n                val bitmap = Util.getBitmap(this, tempImgUri)\r\n                println(\"orientation: $orientation\")\r\n\r\n                //rotate when needed\r\n                val matrix = Matrix()\r\n                when(orientation) {\r\n                    ExifInterface.ORIENTATION_ROTATE_90 -> matrix.postRotate(90f)\r\n                    ExifInterface.ORIENTATION_ROTATE_180 -> matrix.postRotate(180f)\r\n                    ExifInterface.ORIENTATION_ROTATE_270 -> matrix.postRotate(270f)\r\n                    ExifInterface.ORIENTATION_NORMAL, 1 -> {}\r\n                    else -> {\r\n                        matrix.postRotate(0f)\r\n                    }\r\n                }\r\n                //create correct orientation of image\r\n                val rotated = Bitmap.createBitmap(bitmap, 0, 0, bitmap.width, bitmap.height, matrix, true)\r\n                setProfilePhoto(rotated)\r\n            }\r\n        }\r\n\r\n        //\r\n        myViewModel = ViewModelProvider(this).get(MyViewModel::class.java)\r\n        myViewModel.userImage.observe(this) {\r\n            imageView.setImageBitmap(it)\r\n            println(\"new photo set to view\")\r\n        }\r\n\r\n        //save button feature\r\n        saveProfile.setOnClickListener {\r\n            saveProfile()\r\n            println(\"profile saved\")\r\n            Toast.makeText(this, \"Saved\", Toast.LENGTH_SHORT).show()\r\n            finish()\r\n        }\r\n\r\n        //cancel button feature\r\n        cancelProfile.setOnClickListener {\r\n            //don't save any changes\r\n            println(\"not saving profile\")\r\n            finish()\r\n        }\r\n    }\r\n\r\n    class MyRunsDialogFragment : DialogFragment(), DialogInterface.OnClickListener {\r\n        override fun onCreateDialog(savedInstanceState: Bundle?): Dialog {\r\n            //get arguments and dialog details\r\n            lateinit var ret: Dialog\r\n            val bundle = arguments\r\n            val dialogId = bundle?.getInt(DIALOG_KEY)\r\n            val title = bundle?.getString(\"TITLE\") ?: \"My Title\"\r\n            val builder = AlertDialog.Builder(requireActivity())\r\n\r\n            if(dialogId == PHOTO_DIALOG) {\r\n                val view: View = requireActivity().layoutInflater.inflate(\r\n                    R.layout.dialog_photo,\r\n                    null\r\n                )\r\n                builder.setView(view)\r\n                builder.setTitle(title)\r\n\r\n                //get buttons\r\n                val galleryBtn : Button = view.findViewById(R.id.chooseGallery)\r\n                val photoBtn : Button = view.findViewById(R.id.choosePhoto)\r\n\r\n                //open gallery if button pressed\r\n                galleryBtn.setOnClickListener{\r\n                    (activity as? ProfileActivity)?.openGallery()\r\n                    dismiss()\r\n                }\r\n\r\n                //open camera if button pressed\r\n                photoBtn.setOnClickListener{\r\n                    (activity as? ProfileActivity)?.takePhoto()\r\n                    dismiss()\r\n                }\r\n                ret = builder.create()\r\n            }\r\n            return ret\r\n        }\r\n\r\n        //function when buttons are clicked\r\n        override fun onClick(dialog: DialogInterface, item: Int) {\r\n            if(item == Dialog.BUTTON_POSITIVE) {\r\n                Toast.makeText(activity, \"Input Saved\", Toast.LENGTH_LONG).show()\r\n                println(\"fragment positive button clicked\")\r\n            }\r\n            if(item == DialogInterface.BUTTON_NEGATIVE) {\r\n                Toast.makeText(activity, \"Input cancelled\", Toast.LENGTH_LONG).show()\r\n                println(\"fragment negative button clicked\")\r\n            }\r\n        }\r\n    }\r\n\r\n    //show dialog fragment\r\n    private fun showMyDialogFragment(dialogType: Int, title: String) {\r\n        val myDialog = MyRunsDialogFragment()\r\n        val bundle = Bundle().apply {\r\n            putInt(DIALOG_KEY, dialogType)\r\n            putString(\"TITLE\", title)\r\n        }\r\n        myDialog.arguments = bundle\r\n        myDialog.show(supportFragmentManager, \"my_dialog\")\r\n    }\r\n\r\n    //function to open gallery and call activity result to display photo\r\n    private fun openGallery() {\r\n        val intent = Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI)\r\n        galleryResult.launch(intent)\r\n        println(\"gallery opened\")\r\n    }\r\n\r\n    //function to open camera and take photo then call activity result to display photo\r\n    private fun takePhoto() {\r\n        val intent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)\r\n        intent.putExtra(MediaStore.EXTRA_OUTPUT, tempImgUri)\r\n        cameraResult.launch(intent)\r\n        println(\"camera launched\")\r\n    }\r\n\r\n    //function to set profile photo onto screen\r\n    private fun setProfilePhoto(bitmap: Bitmap) {\r\n        println(\"set profile photo\")\r\n        myViewModel.userImage.value = bitmap\r\n        isPhotoChange = true\r\n        imageView.setImageBitmap(bitmap)\r\n    }\r\n\r\n    //function to load saved profile to screen\r\n    private fun loadProfile() {\r\n        profileImagePath = sharedPreferences.getString(\"profileImagePath\", null)\r\n\r\n        //load saved data\r\n        if (profileImagePath != null) {\r\n            val ogFile = File(profileImagePath!!)\r\n            if (ogFile.exists()) {\r\n                val bitmap = BitmapFactory.decodeFile(ogFile.absolutePath)\r\n                imageView.setImageBitmap(bitmap)\r\n            }\r\n        }\r\n\r\n        //get saved data\r\n        val savedUsername = sharedPreferences.getString(\"username\", \"\")\r\n        val savedfirstName = sharedPreferences.getString(\"firstName\", \"\")\r\n        val savedlastName = sharedPreferences.getString(\"lastName\", \"\")\r\n        val savedEmailPhone = sharedPreferences.getString(\"emailPhone\", \"\")\r\n        val savedBirth = sharedPreferences.getString(\"dateBirth\", \"\")\r\n        val savedCountry = sharedPreferences.getString(\"country\", \"\")\r\n\r\n        //load data onto screen\r\n        userName.setText(savedUsername)\r\n        firstName.setText(savedfirstName)\r\n        lastName.setText(savedlastName)\r\n        emailPhone.setText(savedEmailPhone)\r\n        dateBirth.setText(savedBirth)\r\n        country.setText(savedCountry)\r\n    }\r\n\r\n    //function to save profile settings\r\n    private fun saveProfile() {\r\n        //extract inputted data\r\n        val username = userName.text.toString()\r\n        val first = firstName.text.toString()\r\n        val last = lastName.text.toString()\r\n        val ep = emailPhone.text.toString()\r\n        val birth = dateBirth.text.toString()\r\n        val country2 = country.text.toString()\r\n\r\n        //only update file path if a photo was taken\r\n        if(isPhotoChange) {\r\n            tempImgFile.copyTo(profileImgFile, overwrite = true)\r\n            profileImagePath = profileImgFile.path\r\n        }\r\n\r\n        //log profile values\r\n        println(\"username: $username\")\r\n        println(\"first name: $first\")\r\n        println(\"last name: $last\")\r\n        println(\"email/phone: $ep\")\r\n        println(\"date of birth: $birth\")\r\n        println(\"country: $country2\")\r\n\r\n        //save changes\r\n        val editor = sharedPreferences.edit()\r\n        editor.putString(\"username\", username)\r\n        editor.putString(\"firstName\", first)\r\n        editor.putString(\"lastName\", last)\r\n        editor.putString(\"emailPhone\", ep)\r\n        editor.putString(\"dateBirth\", birth)\r\n        editor.putString(\"country\", country2)\r\n        editor.putString(\"profileImagePath\", profileImagePath)\r\n        editor.apply()\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/eggenda/ui/settings/ProfileActivity.kt b/app/src/main/java/com/example/eggenda/ui/settings/ProfileActivity.kt
--- a/app/src/main/java/com/example/eggenda/ui/settings/ProfileActivity.kt	(revision 0a42b132300258816e221681938e46ceb836ac79)
+++ b/app/src/main/java/com/example/eggenda/ui/settings/ProfileActivity.kt	(date 1731035688128)
@@ -32,8 +32,6 @@
 
 class ProfileActivity: AppCompatActivity() {
     companion object {
-        const val FEMALE = 0
-        const val MALE = 1
         const val DIALOG_KEY = "dialog"
         const val PHOTO_DIALOG = 4
     }
Index: app/src/main/res/layout/profile.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@color/yellow\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"vertical\"\r\n        android:layout_marginHorizontal=\"20dp\">\r\n\r\n        <!--profile photo-->\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"vertical\"\r\n            android:gravity=\"center\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/profile_photo\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:maxWidth=\"150dp\"\r\n                android:maxHeight=\"175dp\"\r\n                android:adjustViewBounds=\"true\"\r\n                android:layout_margin=\"10dp\"\r\n                android:src=\"@drawable/defaultprofile\"\r\n                android:scaleType=\"centerCrop\">\r\n            </ImageView>\r\n\r\n            <Button\r\n                android:id=\"@+id/btnChangePhoto\"\r\n                android:backgroundTint=\"@color/bold_yellow\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"5dp\"\r\n                android:text=\"@string/edit_button\"\r\n                android:textSize=\"18sp\"\r\n                android:fontFamily=\"@font/titan_one\"\r\n                />\r\n\r\n        </LinearLayout>\r\n\r\n        <!--username-->\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"90dp\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:textColor=\"#4A3109\"\r\n                android:text=\"@string/username_header\"\r\n                android:textSize=\"16sp\"\r\n                android:fontFamily=\"@font/titan_one\"\r\n                />\r\n\r\n            <EditText\r\n                android:id=\"@+id/edit_username\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n                android:inputType=\"text\"\r\n                android:textSize=\"16sp\"\r\n                android:background=\"@drawable/edit_text_border\"\r\n                android:text=\"@string/username_hint\"\r\n                android:paddingStart=\"16dp\"\r\n                android:textColor=\"@color/dark_blue\"\r\n                android:fontFamily=\"@font/dangrek_font\"/>\r\n        </LinearLayout>\r\n\r\n        <!--first name-->\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"90dp\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:textColor=\"#4A3109\"\r\n                android:text=\"@string/first_name_header\"\r\n                android:textSize=\"16sp\"\r\n                android:fontFamily=\"@font/titan_one\"/>\r\n\r\n            <EditText\r\n                android:id=\"@+id/edit_first_name\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n                android:inputType=\"text\"\r\n                android:textSize=\"16sp\"\r\n                android:background=\"@drawable/edit_text_border\"\r\n                android:text=\"@string/first_name_hint\"\r\n                android:paddingStart=\"16dp\"\r\n                android:textColor=\"@color/dark_blue\"\r\n                android:fontFamily=\"@font/dangrek_font\"/>\r\n        </LinearLayout>\r\n\r\n        <!--last name-->\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"90dp\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:textColor=\"#4A3109\"\r\n                android:text=\"@string/last_name_header\"\r\n                android:textSize=\"16sp\"\r\n                android:fontFamily=\"@font/titan_one\"/>\r\n\r\n            <EditText\r\n                android:id=\"@+id/edit_last_name\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n                android:inputType=\"text\"\r\n                android:textSize=\"16sp\"\r\n                android:background=\"@drawable/edit_text_border\"\r\n                android:text=\"@string/last_name_hint\"\r\n                android:paddingStart=\"16dp\"\r\n                android:textColor=\"@color/dark_blue\"\r\n                android:fontFamily=\"@font/dangrek_font\"/>\r\n        </LinearLayout>\r\n\r\n        <!--email/phone-->\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"90dp\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:textColor=\"#4A3109\"\r\n                android:text=\"@string/e_mail_phone_header\"\r\n                android:textSize=\"16sp\"\r\n                android:fontFamily=\"@font/titan_one\"/>\r\n\r\n            <EditText\r\n                android:id=\"@+id/edit_email_phone\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n                android:inputType=\"text\"\r\n                android:textSize=\"16sp\"\r\n                android:background=\"@drawable/edit_text_border\"\r\n                android:text=\"@string/e_mail_phone_hint\"\r\n                android:paddingStart=\"16dp\"\r\n                android:textColor=\"@color/dark_blue\"\r\n                android:fontFamily=\"@font/dangrek_font\"/>\r\n        </LinearLayout>\r\n\r\n        <!--Date of Birth-->\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"90dp\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:textColor=\"#4A3109\"\r\n                android:text=\"@string/date_of_birth_header\"\r\n                android:textSize=\"16sp\"\r\n                android:fontFamily=\"@font/titan_one\"/>\r\n\r\n            <EditText\r\n                android:id=\"@+id/edit_birth\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n                android:inputType=\"text\"\r\n                android:textSize=\"16sp\"\r\n                android:background=\"@drawable/edit_text_border\"\r\n                android:text=\"@string/birth_hint\"\r\n                android:paddingStart=\"16dp\"\r\n                android:textColor=\"@color/dark_blue\"\r\n                android:fontFamily=\"@font/dangrek_font\"/>\r\n        </LinearLayout>\r\n\r\n        <!--country-->\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"90dp\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:textColor=\"#4A3109\"\r\n                android:text=\"@string/country_header\"\r\n                android:textSize=\"16sp\"\r\n                android:fontFamily=\"@font/titan_one\"/>\r\n\r\n            <EditText\r\n                android:id=\"@+id/edit_country\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n                android:inputType=\"text\"\r\n                android:textSize=\"16sp\"\r\n                android:background=\"@drawable/edit_text_border\"\r\n                android:text=\"@string/country_hint\"\r\n                android:paddingStart=\"16dp\"\r\n                android:textColor=\"@color/dark_blue\"\r\n                android:fontFamily=\"@font/dangrek_font\"/>\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingBottom=\"16dp\">\r\n\r\n            <Button\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_weight=\"0.5\"\r\n                android:layout_margin=\"16dp\"\r\n                android:id=\"@+id/save_profile\"\r\n                android:text=\"@string/save_button\"\r\n                android:textSize=\"18sp\"\r\n                android:fontFamily=\"@font/titan_one\"\r\n                android:backgroundTint=\"@color/bold_yellow\"/>\r\n\r\n            <Button\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_weight=\"0.5\"\r\n                android:layout_margin=\"16dp\"\r\n                android:id=\"@+id/cancel_profile\"\r\n                android:text=\"@string/cancel_button\"\r\n                android:textSize=\"18sp\"\r\n                android:fontFamily=\"@font/titan_one\"\r\n                android:backgroundTint=\"@color/bold_yellow\"/>\r\n        </LinearLayout>\r\n\r\n    </LinearLayout>\r\n</ScrollView>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/profile.xml b/app/src/main/res/layout/profile.xml
--- a/app/src/main/res/layout/profile.xml	(revision 0a42b132300258816e221681938e46ceb836ac79)
+++ b/app/src/main/res/layout/profile.xml	(date 1731884065932)
@@ -65,7 +65,7 @@
                 android:inputType="text"
                 android:textSize="16sp"
                 android:background="@drawable/edit_text_border"
-                android:text="@string/username_hint"
+                android:hint="@string/username_hint"
                 android:paddingStart="16dp"
                 android:textColor="@color/dark_blue"
                 android:fontFamily="@font/dangrek_font"/>
@@ -92,7 +92,7 @@
                 android:inputType="text"
                 android:textSize="16sp"
                 android:background="@drawable/edit_text_border"
-                android:text="@string/first_name_hint"
+                android:hint="@string/first_name_hint"
                 android:paddingStart="16dp"
                 android:textColor="@color/dark_blue"
                 android:fontFamily="@font/dangrek_font"/>
@@ -119,7 +119,7 @@
                 android:inputType="text"
                 android:textSize="16sp"
                 android:background="@drawable/edit_text_border"
-                android:text="@string/last_name_hint"
+                android:hint="@string/last_name_hint"
                 android:paddingStart="16dp"
                 android:textColor="@color/dark_blue"
                 android:fontFamily="@font/dangrek_font"/>
@@ -146,7 +146,7 @@
                 android:inputType="text"
                 android:textSize="16sp"
                 android:background="@drawable/edit_text_border"
-                android:text="@string/e_mail_phone_hint"
+                android:hint="@string/e_mail_phone_hint"
                 android:paddingStart="16dp"
                 android:textColor="@color/dark_blue"
                 android:fontFamily="@font/dangrek_font"/>
@@ -173,7 +173,7 @@
                 android:inputType="text"
                 android:textSize="16sp"
                 android:background="@drawable/edit_text_border"
-                android:text="@string/birth_hint"
+                android:hint="@string/birth_hint"
                 android:paddingStart="16dp"
                 android:textColor="@color/dark_blue"
                 android:fontFamily="@font/dangrek_font"/>
@@ -200,7 +200,7 @@
                 android:inputType="text"
                 android:textSize="16sp"
                 android:background="@drawable/edit_text_border"
-                android:text="@string/country_hint"
+                android:hint="@string/country_hint"
                 android:paddingStart="16dp"
                 android:textColor="@color/dark_blue"
                 android:fontFamily="@font/dangrek_font"/>
Index: app/src/main/java/com/example/eggenda/MainActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.eggenda\r\n\r\nimport android.content.Context\r\nimport android.os.Bundle\r\nimport android.view.Menu\r\nimport com.google.android.material.snackbar.Snackbar\r\nimport com.google.android.material.navigation.NavigationView\r\nimport androidx.navigation.findNavController\r\nimport androidx.navigation.ui.AppBarConfiguration\r\nimport androidx.navigation.ui.navigateUp\r\nimport androidx.navigation.ui.setupActionBarWithNavController\r\nimport androidx.navigation.ui.setupWithNavController\r\nimport androidx.drawerlayout.widget.DrawerLayout\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport com.example.eggenda.databinding.ActivityMainBinding\r\nimport java.util.Locale\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityMainBinding\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        // Apply the selected language using LocaleHelper\r\n        println(\"getting persisted data in MainActivity\")\r\n        LocaleHelper.getPersistedData(this, Locale.getDefault().language)\r\n            ?.let { LocaleHelper.setLocale(this, it) }\r\n\r\n        binding = ActivityMainBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar)\r\n\r\n        // Mail icon in home screen\r\n//        binding.appBarMain.fab.setOnClickListener { view ->\r\n//            Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\r\n//                .setAction(\"Action\", null)\r\n//                .setAnchorView(R.id.fab).show()\r\n//        }\r\n        val drawerLayout: DrawerLayout = binding.drawerLayout\r\n        val navView: NavigationView = binding.navView\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        // Passing each menu ID as a set of Ids because each\r\n        // menu should be considered as top level destinations.\r\n        appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.nav_home, R.id.nav_gallery, R.id.nav_slideshow, R.id.nav_game\r\n            ), drawerLayout\r\n        )\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n    }\r\n\r\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        menuInflater.inflate(R.menu.main, menu)\r\n        return true\r\n    }\r\n\r\n    override fun onSupportNavigateUp(): Boolean {\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        return navController.navigateUp(appBarConfiguration) || super.onSupportNavigateUp()\r\n    }\r\n\r\n    override fun attachBaseContext(newBase: Context) {\r\n        // Set the locale using LocaleHelper based on the persisted language preference\r\n        val currentLanguage = LocaleHelper.getLanguage(newBase)\r\n        if (Locale.getDefault().language != currentLanguage) {\r\n            println(\"calling localeHelper from attachBaseContext\")\r\n            LocaleHelper.setLocale(newBase, currentLanguage)\r\n        }\r\n        super.attachBaseContext(LocaleHelper.onAttach(newBase))\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/eggenda/MainActivity.kt b/app/src/main/java/com/example/eggenda/MainActivity.kt
--- a/app/src/main/java/com/example/eggenda/MainActivity.kt	(revision 0a42b132300258816e221681938e46ceb836ac79)
+++ b/app/src/main/java/com/example/eggenda/MainActivity.kt	(date 1731884942366)
@@ -1,6 +1,7 @@
 package com.example.eggenda
 
 import android.content.Context
+import android.content.Intent
 import android.os.Bundle
 import android.view.Menu
 import com.google.android.material.snackbar.Snackbar
@@ -13,6 +14,7 @@
 import androidx.drawerlayout.widget.DrawerLayout
 import androidx.appcompat.app.AppCompatActivity
 import com.example.eggenda.databinding.ActivityMainBinding
+import com.example.eggenda.ui.account.LoginActivity
 import java.util.Locale
 
 class MainActivity : AppCompatActivity() {
@@ -23,6 +25,15 @@
     override fun onCreate(savedInstanceState: Bundle?) {
         super.onCreate(savedInstanceState)
 
+        //start login page if user is not logged in
+        val sharedPreferences = getSharedPreferences("account", MODE_PRIVATE)
+        val isLoggedIn = sharedPreferences.getBoolean("isLoggedIn", false)
+
+        if(!isLoggedIn) {
+            val intent = Intent(this, LoginActivity::class.java)
+            startActivity(intent)
+            finish()
+        }
         // Apply the selected language using LocaleHelper
         println("getting persisted data in MainActivity")
         LocaleHelper.getPersistedData(this, Locale.getDefault().language)
Index: app/src/main/java/com/example/eggenda/ui/account/LoginActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/eggenda/ui/account/LoginActivity.kt b/app/src/main/java/com/example/eggenda/ui/account/LoginActivity.kt
new file mode 100644
--- /dev/null	(date 1731884808367)
+++ b/app/src/main/java/com/example/eggenda/ui/account/LoginActivity.kt	(date 1731884808367)
@@ -0,0 +1,50 @@
+package com.example.eggenda.ui.account
+
+import android.content.Intent
+import android.content.SharedPreferences
+import android.os.Bundle
+import android.widget.Button
+import android.widget.EditText
+import android.widget.Toast
+import androidx.appcompat.app.AppCompatActivity
+import com.example.eggenda.MainActivity
+import com.example.eggenda.R
+
+class LoginActivity : AppCompatActivity() {
+    private lateinit var username: EditText
+    private lateinit var password: EditText
+    private lateinit var loginBtn: Button
+    private lateinit var sharedPreferences: SharedPreferences
+
+    override fun onCreate(savedInstanceState: Bundle?) {
+        super.onCreate(savedInstanceState)
+        setContentView(R.layout.activity_login)
+
+        username = findViewById(R.id.username_input)
+        password = findViewById(R.id.password_input)
+        loginBtn = findViewById(R.id.login_btn)
+        sharedPreferences = getSharedPreferences("account", MODE_PRIVATE)
+
+        //once decide to login
+        loginBtn.setOnClickListener {
+            val user = username.text.toString().trim()
+            val pw = password.text.toString().trim()
+
+            //if valid input then save username and password and keep logged in
+            if(user.isNotEmpty() && pw.isNotEmpty()) {
+                val editor = sharedPreferences.edit()
+                editor.putBoolean("isLoggedIn", true)
+                editor.putString("username", user)
+                editor.putString("password", pw)
+                editor.apply()
+
+                //start app
+                val intent = Intent(this, MainActivity::class.java)
+                startActivity(intent)
+                finish()
+            } else {
+                Toast.makeText(this, "Invalid Input", Toast.LENGTH_SHORT).show()
+            }
+        }
+    }
+}
\ No newline at end of file
Index: app/src/main/res/values/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\r\n    <string name=\"app_name\">Eggenda</string>\r\n    <string name=\"navigation_drawer_open\">Open navigation drawer</string>\r\n    <string name=\"navigation_drawer_close\">Close navigation drawer</string>\r\n    <string name=\"nav_header_title\">Android Studio</string>\r\n    <string name=\"nav_header_subtitle\">android.studio@android.com</string>\r\n    <string name=\"nav_header_desc\">Navigation header</string>\r\n    <string name=\"action_settings\">Settings</string>\r\n\r\n    <string name=\"menu_home\">Home</string>\r\n    <string name=\"menu_gallery\">Gallery</string>\r\n    <string name=\"menu_slideshow\">Slideshow</string>\r\n    <string name=\"gallery_choice\">Choose from Gallery</string>\r\n    <string name=\"photo_choice\">Take a Photo</string>\r\n    <string name=\"settings_title\">Settings</string>\r\n    <string name=\"game_start\">Start</string>\r\n    <string name=\"game_label\">Game</string>\r\n    <string name=\"display_name\">John Smith</string>\r\n    <string name=\"hatch_progress\">Hatch Progress: ??%</string>\r\n    <string name=\"new_quest\">New Quest</string>\r\n    <string name=\"quest_board\">Quest Board</string>\r\n    <string name=\"nq_title\">New Quest</string>\r\n    <string name=\"nq_subtitle\">Make your quest easier with our reminders</string>\r\n    <string name=\"deadline\">Deadline</string>\r\n    <string name=\"date\">DD/MM/YY</string>\r\n    <string name=\"accept\">Accept</string>\r\n    <string name=\"decline\">Decline</string>\r\n    <string name=\"experience\">Experience: 0/100</string>\r\n    <string name=\"gain_xp\">Gain XP</string>\r\n    <string name=\"task\">Task</string>\r\n    <string name=\"create_a_task\">Create a task</string>\r\n    <string name=\"time_limit\">Time Limit</string>\r\n    <string name=\"time_format\">HH:MM:SS</string>\r\n    <string name=\"details\">Details</string>\r\n    <string name=\"write_here\">Write here...</string>\r\n    <string name=\"attachments\">Attachments</string>\r\n    <string name=\"max_20mb\">Max 20mb</string>\r\n    <string name=\"user_profile_header\">User Profile</string>\r\n    <string name=\"language_header\">Language</string>\r\n    <string name=\"conditions_header\">Terms and Conditions</string>\r\n    <string name=\"edit_button\">Edit</string>\r\n    <string name=\"username_header\">Username</string>\r\n    <string name=\"username_hint\" translatable=\"false\">JohnSmith</string>\r\n    <string name=\"first_name_header\">First Name</string>\r\n    <string name=\"first_name_hint\" translatable=\"false\">John</string>\r\n    <string name=\"last_name_header\">Last Name</string>\r\n    <string name=\"last_name_hint\" translatable=\"false\">Smith</string>\r\n    <string name=\"e_mail_phone_header\">E-mail/Phone</string>\r\n    <string name=\"e_mail_phone_hint\" translatable=\"false\">E-mail/Phone</string>\r\n    <string name=\"date_of_birth_header\">Date of Birth</string>\r\n    <string name=\"birth_hint\" translatable=\"false\">dd/mm/yy</string>\r\n    <string name=\"country_header\">Country</string>\r\n    <string name=\"country_hint\" translatable=\"false\">ex. Canada</string>\r\n    <string name=\"save_button\">Save</string>\r\n    <string name=\"cancel_button\">Cancel</string>\r\n    <string name=\"logout\">Log Out\\n</string>\r\n    <string name=\"terms_conditions_details\" translatable=\"false\">terms and conditions</string>\r\n    <string name=\"game\">Start Game</string>\r\n\r\n    <string-array name=\"language_options\">\r\n        <item>English</item>\r\n        <item>Chinese</item>\r\n    </string-array>\r\n\r\n    <string-array name=\"language_values\">\r\n        <item>en</item>\r\n        <item>zh</item>\r\n    </string-array>\r\n\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
--- a/app/src/main/res/values/strings.xml	(revision 0a42b132300258816e221681938e46ceb836ac79)
+++ b/app/src/main/res/values/strings.xml	(date 1731884226688)
@@ -56,6 +56,8 @@
     <string name="logout">Log Out\n</string>
     <string name="terms_conditions_details" translatable="false">terms and conditions</string>
     <string name="game">Start Game</string>
+    <string name="password_hint">Password</string>
+    <string name="login_button">Login</string>
 
     <string-array name="language_options">
         <item>English</item>
Index: app/src/main/res/layout/activity_login.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_login.xml b/app/src/main/res/layout/activity_login.xml
new file mode 100644
--- /dev/null	(date 1731884263758)
+++ b/app/src/main/res/layout/activity_login.xml	(date 1731884263758)
@@ -0,0 +1,57 @@
+<?xml version="1.0" encoding="utf-8"?>
+<RelativeLayout
+    xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    android:background="@color/yellow"
+    android:gravity="center"
+    android:padding="16dp"
+    tools:context=".ui.account.LoginActivity">
+    
+    <LinearLayout
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:gravity="center"
+        android:orientation="vertical">
+        
+        <ImageView
+            android:layout_width="160dp"
+            android:layout_height="160dp"
+            android:src="@drawable/app_icon"/>
+
+        <EditText
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:hint="@string/username_header"
+            android:textSize="20sp"
+            android:background="@drawable/edit_text_border"
+            android:padding="18dp"
+            android:layout_marginVertical="16dp"
+            android:inputType="text"
+            android:id="@+id/username_input"
+            android:fontFamily="@font/dangrek_font"/>
+
+        <EditText
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:hint="@string/password_hint"
+            android:textSize="20sp"
+            android:background="@drawable/edit_text_border"
+            android:padding="18dp"
+            android:inputType="textPassword"
+            android:id="@+id/password_input"
+            android:fontFamily="@font/dangrek_font"/>
+
+        <Button
+            android:id="@+id/login_btn"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:text="@string/login_button"
+            android:textSize="24sp"
+            android:fontFamily="@font/titan_one"
+            android:padding="14dp"
+            android:layout_margin="16dp"/>
+    </LinearLayout>
+</RelativeLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/eggenda/Util.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.eggenda\r\n\r\nimport android.Manifest\r\nimport android.app.Activity\r\nimport android.content.Context\r\nimport android.content.pm.PackageManager\r\nimport android.graphics.Bitmap\r\nimport android.graphics.BitmapFactory\r\nimport android.graphics.Matrix\r\nimport android.net.Uri\r\nimport androidx.core.app.ActivityCompat\r\nimport androidx.core.content.ContextCompat\r\n\r\nobject Util {\r\n    fun checkPermissions(activity: Activity?) {\r\n        if (ContextCompat.checkSelfPermission(activity!!, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(activity, arrayOf(Manifest.permission.CAMERA), 0)\r\n        }\r\n\r\n        if(ContextCompat.checkSelfPermission(activity!!, Manifest.permission.READ_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(activity, arrayOf(Manifest.permission.READ_EXTERNAL_STORAGE), 1)\r\n        }\r\n    }\r\n\r\n\r\n    fun getBitmap(context: Context, imgUri: Uri): Bitmap {\r\n        var bitmap = BitmapFactory.decodeStream(context.contentResolver.openInputStream(imgUri))\r\n        val matrix = Matrix()\r\n        var ret = Bitmap.createBitmap(bitmap, 0, 0, bitmap.width, bitmap.height, matrix, true)\r\n        return ret\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/eggenda/Util.kt b/app/src/main/java/com/example/eggenda/Util.kt
--- a/app/src/main/java/com/example/eggenda/Util.kt	(revision 0a42b132300258816e221681938e46ceb836ac79)
+++ b/app/src/main/java/com/example/eggenda/Util.kt	(date 1731035688106)
@@ -22,7 +22,6 @@
         }
     }
 
-
     fun getBitmap(context: Context, imgUri: Uri): Bitmap {
         var bitmap = BitmapFactory.decodeStream(context.contentResolver.openInputStream(imgUri))
         val matrix = Matrix()
